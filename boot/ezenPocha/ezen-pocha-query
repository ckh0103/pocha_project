

// 메뉴 등록 시 이미지파일 -> URL 홈페이지 
// https://ifh.cc/

// 시퀀스 생성
CREATE SEQUENCE MENU_SEQ
START WITH 1
INCREMENT BY 1
NOCACHE;

// 시퀀스 존재 확인
SELECT * FROM USER_SEQUENCES WHERE SEQUENCE_NAME = 'MENU_SEQ';

// Menu 테이블생성
CREATE TABLE MENU (
    ID NUMBER(19,0) NOT NULL,
    NAME VARCHAR2(255 CHAR),
    PRICE NUMBER(10,0),
    CATEGORY VARCHAR2(255 CHAR),
    IMAGE VARCHAR2(255 CHAR),
    PRIMARY KEY (ID)
);

// commit

-- 1. 테이블 마스터 테이블 생성
CREATE TABLE TABLES (
    TABLE_NUMBER VARCHAR2(20) PRIMARY KEY,
    STATUS VARCHAR2(50) NOT NULL,
    MALE_COUNT NUMBER DEFAULT 0,
    FEMALE_COUNT NUMBER DEFAULT 0,
    TOTAL_AMOUNT NUMBER DEFAULT 0,
    CONSTRAINT CHK_STATUS CHECK (STATUS IN ('자리 비음', '주문 완료'))
);

-- 2. 주문 항목 테이블 생성
CREATE TABLE ORDER_ITEMS (
    ORDER_ID NUMBER GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
    TABLE_NUMBER VARCHAR2(20) NOT NULL,
    MENU_NAME VARCHAR2(100) NOT NULL,
    QUANTITY NUMBER NOT NULL,
    PRICE NUMBER NOT NULL,
    CONSTRAINT FK_TABLE_NUMBER FOREIGN KEY (TABLE_NUMBER) REFERENCES TABLES(TABLE_NUMBER) ON DELETE CASCADE
);

-- 3. 초기 데이터 삽입 (initialTableData.js 와 동일한 상태)

-- TABLES 테이블 데이터 삽입
INSERT INTO TABLES (TABLE_NUMBER, STATUS, MALE_COUNT, FEMALE_COUNT, TOTAL_AMOUNT) VALUES ('NO.1', '주문 완료', 2, 1, 20000);
INSERT INTO TABLES (TABLE_NUMBER, STATUS) VALUES ('NO.2', '자리 비음');
INSERT INTO TABLES (TABLE_NUMBER, STATUS, MALE_COUNT, FEMALE_COUNT, TOTAL_AMOUNT) VALUES ('NO.3', '주문 완료', 3, 3, 38000);
INSERT INTO TABLES (TABLE_NUMBER, STATUS, MALE_COUNT, FEMALE_COUNT, TOTAL_AMOUNT) VALUES ('NO.4', '주문 완료', 4, 0, 36000);
INSERT INTO TABLES (TABLE_NUMBER, STATUS) VALUES ('NO.5', '자리 비음');
INSERT INTO TABLES (TABLE_NUMBER, STATUS) VALUES ('NO.6', '자리 비음');

-- ORDER_ITEMS 테이블 데이터 삽입
-- NO.1 테이블 주문
INSERT INTO ORDER_ITEMS (TABLE_NUMBER, MENU_NAME, QUANTITY, PRICE) VALUES ('NO.1', '사천해물짬뽕탕', 1, 15000);
INSERT INTO ORDER_ITEMS (TABLE_NUMBER, MENU_NAME, QUANTITY, PRICE) VALUES ('NO.1', '소주', 1, 5000);
-- NO.3 테이블 주문
INSERT INTO ORDER_ITEMS (TABLE_NUMBER, MENU_NAME, QUANTITY, PRICE) VALUES ('NO.3', '닭볶음탕', 1, 18000);
INSERT INTO ORDER_ITEMS (TABLE_NUMBER, MENU_NAME, QUANTITY, PRICE) VALUES ('NO.3', '맥주', 4, 20000);
-- NO.4 테이블 주문
INSERT INTO ORDER_ITEMS (TABLE_NUMBER, MENU_NAME, QUANTITY, PRICE) VALUES ('NO.4', '계란말이', 1, 10000);
INSERT INTO ORDER_ITEMS (TABLE_NUMBER, MENU_NAME, QUANTITY, PRICE) VALUES ('NO.4', '골뱅이소면', 1, 16000);
INSERT INTO ORDER_ITEMS (TABLE_NUMBER, MENU_NAME, QUANTITY, PRICE) VALUES ('NO.4', '소주', 2, 10000);

COMMIT;


